change path to main
only generate image when source code is updated
fix data leaks